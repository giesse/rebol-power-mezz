<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content="REBOL" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>"Tee" port scheme for REBOL</title>

<style type="text/css">
/*<![CDATA[*/
html, body, p, li {font-family: Georgia, Times New Roman, serif; text-align: justify;}
.code, .code p {font-family: Trebuchet MS, Arial, Helvetica, sans-serif;}
.code .string, .code .tag, .code .issue {font-family: Lucida Console, Courier New, Courier, fixed;}
.code .word, .code .set-word, .code .lit-word, .code .get-word, .code .refinement {font-style: italic;}
.code .key {font-style: normal; font-weight: bold;}
.code .function {font-weight: bold; font-style: normal;}
.code .ref a {text-decoration: none; color: black;}
.code .ref a:hover {text-decoration: underline; color: blue;}
.code .issue, .code .tag, .code .datatype {color: green;}
.code .datatype {font-style: normal;}
.code .url, .code .file, .code .refinement, .code .lit-word {color: brown;}
.code .integer, .code .decimal, .code .tuple, .code .pair {color: blue;}
.code .comment {color: gray;}
div.code {margin-left: 95pt;}
div.code p.sectdef {font-style: normal; margin: 0 0 0 -30pt;}
div.code p {margin: 0;}
div.code span.tab {padding-left: .75cm; border-left: dotted thin #CCCCCC;}
div.code span.directive {background-color: #F0FFF0; border: dotted thin black;}
#header {margin: 34pt 140pt 140pt 140pt; padding: 0;}
#title {text-align: center; margin: 0 0 34pt 0;}
#author {text-align: center; margin: 13pt 0 0 0; font-size: 13pt;}
#dateversion {text-align: center; margin: 0 0 24pt 0; font-size: 12pt;}
#purpose {text-align: justify; font-style: italic;}
#license {font-size: 7pt; color: gray; margin: 2pt 10pt 2pt 10pt; width: 200pt; float: right; white-space: pre;}
#history {width: 60%; font-size: 10pt; margin-left: auto; margin-right: auto;}
#history thead tr {background-color: #E0E0E0;}
#history td.date {text-align: right;}
#history td.version {text-align: center;}
#history td.desc {width: 100%; text-align: justify;}
#history td.name {text-align: left;}
#toc {margin: 70pt;}
#toc li {list-style: none;}
.section {margin: 70pt 70pt 70pt 100pt;}
.section h2, .section h3 {margin-left: -30pt;}
pre {font-family: Lucida Console; overflow: scroll;}
.center {margin-left: auto; margin-right: auto; text-align: center;}
span.bra {font-family: Arial Unicode MS;}
div.note {margin: 3pt; margin-bottom: 14pt; padding: 0 12pt 6pt 12pt; background-color: #E0E0E0;}
div.note h2 {
    margin: 0 -12pt 12pt -12pt;
    padding: 5pt;
    text-align: center;
    background-color: #606060;
    color: white;
    font-size: 14pt;
}
div.image {text-align: center;}
div.image img {padding: 10px; border: dashed thin black;}
/*]]>*/
</style>
</head>

<body>
    <div id="header"><h1 id="title">"Tee" port scheme for REBOL</h1><h2 id="author">Gabriele Santilli</h2><h2 id="dateversion">1.0.0</h2><p id="purpose">
        Implements tee://, a port scheme that allows sending a stream to two destinations
        at the same time.
    </p><div id="license">
        =================================
        A message from Qtask about this source code:

        We have selected the MIT license (as of 2010-Jan-1) because
        it is the closest “standard” license to our intent.  If we had our way,
        we would declare this source as public domain, with absolutely no
        strings attached, not even the string that says you have to have
        strings.  We want to help people, so please feel free to contact us
        at API@Qtask.com if you have questions.
         

        (you only need to include the standard license text below in your
        homage to this source code)
        =================================

        Copyright 2008 Qtask, Inc.

        Permission is hereby granted, free of charge, to any person obtaining
        a copy of this software and associated documentation files
        (the "Software"), to deal in the Software without restriction, including
        without limitation the rights to use, copy, modify, merge, publish,
        distribute, sublicense, and/or sell copies of the Software, and to
        permit persons to whom the Software is furnished to do so, subject
        to the following conditions:

        The above copyright notice and this permission notice shall be included
        in all copies or substantial portions of the Software.

        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
        OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
        THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
        OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
        ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
        OTHER DEALINGS IN THE SOFTWARE.
    </div></div><div id="toc"><h2>Contents:</h2><ul><li><a href="#section-1">1. Introduction</a></li><li><a href="#section-2">2. Overview</a></li><li><a href="#section-3">3. Usage examples</a></li><li><a href="#section-4">4. Implementation</a></li><ul><li><a href="#section-4.1">4.1 Initialize the tee port <span class="code"><span class="word">port</span></span> from <span class="code"><span class="word">spec</span></span></a></li><li><a href="#section-4.2">4.2 Open the tee port <span class="code"><span class="word">port</span></span></a></li><li><a href="#section-4.3">4.3 Close the tee port <span class="code"><span class="word">port</span></span></a></li><li><a href="#section-4.4">4.4 Write <span class="code"><span class="word">data</span></span> into the buffer and to <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></a></li><li><a href="#section-4.5">4.5 Put the contents of the buffer into <span class="code"><span class="word">data</span></span> and clear the buffer</a></li><li><a href="#section-4.6">4.6 Update <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></a></li></ul></ul></div><div class="section"><h2 id="section-1">1. Introduction</h2><p>This port scheme allows creating a "filter" port that works like a "tee"; that is, it lets data
pass through it, but it also copies it into another port. This basically allows creating a "bifurcation",
often called a "tee" (because of the shape of the letter T). This is very useful in combination with
the <span class="code"><span class="url">chain://</span></span> scheme or the <span class="code"><span class="word">pipe</span></span> function, as it allows creating complex filtering graphs for your
data stream.</p></div><div class="section"><h2 id="section-2">2. Overview</h2><p>We define the <span class="code"><span class="url">tee://</span></span> scheme in the usual way; although this is not really a network protocol,
REBOL does not like it if we don't use <span class="code"><span class="word">net-install</span></span>. The specified port id does not matter (any
random number will do).</p><p>Since we're writing a non pass-thru port, we only have to define <span class="code"><span class="word key"title="READ source /binary /string /direct /no-wait /lines /part size /with end-of-line /mode args /custom params /skip length">read</span></span> and <span class="code"><span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span></span>, and REBOL
will map <span class="code"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span></span>, <span class="code"><span class="word key"title="COPY value /part range /deep">copy</span></span>, <span class="code"><span class="word key"title="PICK series index">pick</span></span> etc. to them internally; REBOL will also do any line termination
conversion, however we recommend only using <span class="code"><span class="refinement">/binary</span></span> ports for filtering. This scheme has not
been tested without <span class="code"><span class="refinement">/binary</span></span>.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Overview<span class="bra">&#9002;</span> &#8801;</p><p><span class="path"><span class="word">net-utils</span>/<span class="word">net-install</span></span> <span class="lit-word">'tee</span> <span class="word key"title="MAKE type spec">make</span> <span class="word">Root-Protocol</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">init:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span> <span class="word">spec</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.1">Initialize the tee port <span class="code"><span class="word">port</span></span> from <span class="code"><span class="word">spec</span></span></a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">open:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.2">Open the tee port <span class="code"><span class="word">port</span></span></a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">close:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.3">Close the tee port <span class="code"><span class="word">port</span></span></a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">write:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span> <span class="word">data</span> <span class="refinement">/local</span> <span class="ref"><span class="bra">&#9001;</span><a href="#section-4.4.1"><span class="code"><span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span></span>'s locals</a><span class="bra">&#9002;</span></span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.4">Write <span class="code"><span class="word">data</span></span> into the buffer and to <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">read:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span> <span class="word">data</span> <span class="refinement">/local</span> <span class="ref"><span class="bra">&#9001;</span><a href="#section-4.5.1"><span class="code"><span class="word key"title="READ source /binary /string /direct /no-wait /lines /part size /with end-of-line /mode args /custom params /skip length">read</span></span>'s locals</a><span class="bra">&#9002;</span></span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.5">Put the contents of the buffer into <span class="code"><span class="word">data</span></span> and clear the buffer</a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">update:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">port</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4.6">Update <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></a><span class="bra">&#9002;</span></span><br /><span class="tab">&nbsp;</span>]<br />] <span class="integer">80</span></p></div></div><div class="section"><h2 id="section-3">3. Usage examples</h2><p>The following example will create a port that lets all data pass through unaltered, but
also copies and inserts it into <span class="code"><span class="word">my-port</span></span>.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Usage examples<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">tee:</span> <span class="path"><span class="word key"title="OPEN spec /binary /string /direct /seek /new /read /write /no-wait /lines /with end-of-line /allow access /mode args /custom params /skip length">open</span>/<span class="word">binary</span></span> [<span class="set-word">scheme:</span> <span class="lit-word">'tee</span> <span class="set-word">sub-port:</span> <span class="word">my-port</span>]</p></div><p>If you just want to copy to a file, you can specify it directly or use a <span class="code"><span class="word datatype"title="">url!</span></span> like in the example below and the
file will be opened for writing and closed automatically for you.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Usage examples<span class="bra">&#9002;</span> +&#8801;</p><p><span class="set-word">tee:</span> <span class="path"><span class="word key"title="OPEN spec /binary /string /direct /seek /new /read /write /no-wait /lines /with end-of-line /allow access /mode args /custom params /skip length">open</span>/<span class="word">binary</span></span> [<span class="set-word">scheme:</span> <span class="lit-word">'tee</span> <span class="set-word">sub-port:</span> <span class="file">%/path/to/file</span>]<br /><span class="set-word">tee:</span> <span class="path"><span class="word key"title="OPEN spec /binary /string /direct /seek /new /read /write /no-wait /lines /with end-of-line /allow access /mode args /custom params /skip length">open</span>/<span class="word">binary</span></span> <span class="url">tee:/path/to/file</span></p></div></div><div class="section"><h2 id="section-4">4. Implementation</h2><p>The implementation of the port scheme is relatively trivial.</p><h3 id="section-4.1">4.1 Initialize the tee port <span class="code"><span class="word">port</span></span> from <span class="code"><span class="word">spec</span></span></h3><p>The <span class="code"><span class="word">init</span></span> function is used to initialize the port (called when you <span class="code"><span class="word key"title="MAKE type spec">make</span></span> it). The user will
neet to pass a port to write to in the <span class="code"><span class="word">sub-port</span></span> field, or specify a file. (See <span class="code"><span class="ref"><span class="bra">&#9001;</span><a href="#section-3">Usage examples</a><span class="bra">&#9002;</span></span></span>.)</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Initialize the tee port <span class="code"><span class="word">port</span></span> from <span class="code"><span class="word">spec</span></span><span class="bra">&#9002;</span> &#8801;</p><p><span class="set-path">port/url:</span> <span class="word">spec</span><br /><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="URL? value">url?</span> <span class="word">spec</span> [<br /><span class="tab">&nbsp;</span><span class="comment">; assume that user wants to write to a file</span><br /><span class="tab">&nbsp;</span><span class="set-word">spec:</span> <span class="word key"title="TO type spec">to</span> <span class="word datatype"title="">file!</span> <span class="word key"title="SKIP series offset">skip</span> <span class="word">spec</span> <span class="integer">4</span><br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span>/<span class="word">match</span></span> <span class="word">spec</span> <span class="file">%//</span> [<span class="word key"title="REMOVE series /part range">remove</span> <span class="word">spec</span>]<br /><span class="tab">&nbsp;</span><span class="set-path">port/sub-port:</span> <span class="word">spec</span><br />]<br /><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="NONE? value">none?</span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="NET-ERROR info">net-error</span> <span class="string">"You must specify a sub port to write to"</span><br />]</p></div><h3 id="section-4.2">4.2 Open the tee port <span class="code"><span class="word">port</span></span></h3><p>The <span class="code"><span class="word key"title="OPEN spec /binary /string /direct /seek /new /read /write /no-wait /lines /with end-of-line /allow access /mode args /custom params /skip length">open</span></span> function creates a buffer to store data into and, if a <span class="code"><span class="word datatype"title="">file!</span></span> was provided, opens
it in <span class="code"><span class="refinement">/binary</span><span class="refinement">/direct</span><span class="refinement">/write</span><span class="refinement">/new</span></span> mode. We also force the <span class="code"><span class="refinement">/direct</span></span> mode, since we are a "filter"
kind of port.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Open the tee port <span class="code"><span class="word">port</span></span><span class="bra">&#9002;</span> &#8801;</p><p><span class="set-path">port/locals:</span> <span class="word key"title="CONTEXT blk">context</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">buffer:</span> <span class="word key"title="MAKE type spec">make</span> <span class="word datatype"title="">binary!</span> <span class="integer">1024</span><br /><span class="tab">&nbsp;</span><span class="set-word">close?:</span> <span class="word">no</span><br />]<br /><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="FILE? value">file?</span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span> [<br /><span class="tab">&nbsp;</span><span class="set-path">port/locals/close?:</span> <span class="word">yes</span><br /><span class="tab">&nbsp;</span><span class="set-path">port/sub-port:</span> <span class="path"><span class="word">system</span>/<span class="word">words</span>/<span class="word key"title="OPEN spec /binary /string /direct /seek /new /read /write /no-wait /lines /with end-of-line /allow access /mode args /custom params /skip length">open</span>/<span class="word">binary</span>/<span class="word">direct</span>/<span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span>/<span class="word">new</span></span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span><br />]<br /><span class="set-path">port/state/flags:</span> <span class="path"><span class="word">port</span>/<span class="word">state</span>/<span class="word">flags</span></span> <span class="word key"title="OR value1 value2">or</span> <span class="path"><span class="word">system</span>/<span class="word">standard</span>/<span class="word">port-flags</span>/<span class="word">direct</span></span></p></div><h3 id="section-4.3">4.3 Close the tee port <span class="code"><span class="word">port</span></span></h3><p>On <span class="code"><span class="word key"title="CLOSE port">close</span></span>, we need to close the file port if we had opened it; we also set <span class="code"><span class="path"><span class="word">port</span>/<span class="word">locals</span></span></span> to
<span class="code"><span class="word">none</span></span> to allow REBOL to reclaim memory.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Close the tee port <span class="code"><span class="word">port</span></span><span class="bra">&#9002;</span> &#8801;</p><p><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">close?</span></span> [<br /><span class="tab">&nbsp;</span><span class="path"><span class="word">system</span>/<span class="word">words</span>/<span class="word key"title="CLOSE port">close</span></span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span><br /><span class="tab">&nbsp;</span><span class="comment">; allow reopening it easily</span><br /><span class="tab">&nbsp;</span><span class="set-path">port/sub-port:</span> <span class="word key"title="JOIN value rest">join</span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span>/<span class="word key"title="PATH value selector">path</span></span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span>/<span class="word">target</span></span><br />]<br /><span class="set-path">port/locals:</span> <span class="word">none</span></p></div><h3 id="section-4.4">4.4 Write <span class="code"><span class="word">data</span></span> into the buffer and to <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></h3><p>On <span class="code"><span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span></span>, we write the data into the sub port, and also store it into our buffer.</p><p>Note: we have a workaround here for a bug with <span class="code"><span class="url">checksum://</span></span> ports. We'll remove this
code once the bug has been fixed.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Write <span class="code"><span class="word">data</span></span> into the buffer and to <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span><span class="bra">&#9002;</span> &#8801;</p><p><span class="path"><span class="word key"title="SET word value /any /pad">set</span>/<span class="word key"title="ANY block">any</span></span> <span class="lit-word">'len</span> <span class="word key"title="WRITE-IO port buffer length">write-io</span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span> <span class="word">data</span> <span class="path"><span class="word">port</span>/<span class="word">state</span>/<span class="word">num</span></span><br /><span class="comment">; checksum:// will return unset, so we always assume all data has been written</span><br /><span class="word key"title="UNLESS condition block">unless</span> <span class="word key"title="VALUE? value">value?</span> <span class="lit-word">'len</span> [<span class="set-word">len:</span> <span class="path"><span class="word">port</span>/<span class="word">state</span>/<span class="word">num</span></span>]<br /><span class="path"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span>/<span class="word">part</span></span> <span class="word key"title="TAIL series">tail</span> <span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">buffer</span></span> <span class="word">data</span> <span class="word">len</span><br /><span class="word">len</span></p></div><h4 id="section-4.4.1">4.4.1 <span class="code"><span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span></span>'s locals</h4><div class="code"><p class="sectdef"><span class="bra">&#9001;</span><span class="code"><span class="word key"title="WRITE destination value /binary /string /direct /append /no-wait /lines /part size /with end-of-line /allow access /mode args /custom params">write</span></span>'s locals<span class="bra">&#9002;</span> &#8801;</p><p><span class="word">len</span></p></div><h3 id="section-4.5">4.5 Put the contents of the buffer into <span class="code"><span class="word">data</span></span> and clear the buffer</h3><p>On <span class="code"><span class="word key"title="READ source /binary /string /direct /no-wait /lines /part size /with end-of-line /mode args /custom params /skip length">read</span></span>, we copy data from our buffer into <span class="code"><span class="word">data</span></span>. We remove the copied data from
<span class="code"><span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">buffer</span></span></span> and return the actual number of bytes copied.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Put the contents of the buffer into <span class="code"><span class="word">data</span></span> and clear the buffer<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">len:</span> <span class="word key"title="MIN value1 value2">min</span> <span class="word key"title="LENGTH? series">length?</span> <span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">buffer</span></span> <span class="path"><span class="word">port</span>/<span class="word">state</span>/<span class="word">num</span></span><br /><span class="path"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span>/<span class="word">part</span></span> <span class="word key"title="TAIL series">tail</span> <span class="word">data</span> <span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">buffer</span></span> <span class="word">len</span><br /><span class="path"><span class="word key"title="REMOVE series /part range">remove</span>/<span class="word">part</span></span> <span class="path"><span class="word">port</span>/<span class="word">locals</span>/<span class="word">buffer</span></span> <span class="word">len</span><br /><span class="word">len</span></p></div><h4 id="section-4.5.1">4.5.1 <span class="code"><span class="word key"title="READ source /binary /string /direct /no-wait /lines /part size /with end-of-line /mode args /custom params /skip length">read</span></span>'s locals</h4><div class="code"><p class="sectdef"><span class="bra">&#9001;</span><span class="code"><span class="word key"title="READ source /binary /string /direct /no-wait /lines /part size /with end-of-line /mode args /custom params /skip length">read</span></span>'s locals<span class="bra">&#9002;</span> &#8801;</p><p><span class="word">len</span></p></div><h3 id="section-4.6">4.6 Update <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span></h3><p>On <span class="code"><span class="word key"title="UPDATE port">update</span></span>, we just call <span class="code"><span class="word key"title="UPDATE port">update</span></span> on the sub port (we're using <span class="code"><span class="word key"title="ATTEMPT value">attempt</span></span> because file ports don't like <span class="code"><span class="word key"title="UPDATE port">update</span></span>).</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Update <span class="code"><span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span></span><span class="bra">&#9002;</span> &#8801;</p><p><span class="word key"title="ATTEMPT value">attempt</span> [<span class="path"><span class="word">system</span>/<span class="word">words</span>/<span class="word key"title="UPDATE port">update</span></span> <span class="path"><span class="word">port</span>/<span class="word">sub-port</span></span>]</p></div></div>
    <div id="footer"><p><a href="http://www.rebol.com/">MakeDoc3 by REBOL</a> - 2-Sep-2018</p></div>
</body>
</html>
