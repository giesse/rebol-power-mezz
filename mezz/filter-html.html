<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content="REBOL" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>HTML Filter</title>

<style type="text/css">
/*<![CDATA[*/
html, body, p, li {font-family: Georgia, Times New Roman, serif; text-align: justify;}
.code, .code p {font-family: Trebuchet MS, Arial, Helvetica, sans-serif;}
.code .string, .code .tag, .code .issue {font-family: Lucida Console, Courier New, Courier, fixed;}
.code .word, .code .set-word, .code .lit-word, .code .get-word, .code .refinement {font-style: italic;}
.code .key {font-style: normal; font-weight: bold;}
.code .function {font-weight: bold; font-style: normal;}
.code .ref a {text-decoration: none; color: black;}
.code .ref a:hover {text-decoration: underline; color: blue;}
.code .issue, .code .tag, .code .datatype {color: green;}
.code .datatype {font-style: normal;}
.code .url, .code .file, .code .refinement, .code .lit-word {color: brown;}
.code .integer, .code .decimal, .code .tuple, .code .pair {color: blue;}
.code .comment {color: gray;}
div.code {margin-left: 95pt;}
div.code p.sectdef {font-style: normal; margin: 0 0 0 -30pt;}
div.code p {margin: 0;}
div.code span.tab {padding-left: .75cm; border-left: dotted thin #CCCCCC;}
div.code span.directive {background-color: #F0FFF0; border: dotted thin black;}
#header {margin: 34pt 140pt 140pt 140pt; padding: 0;}
#title {text-align: center; margin: 0 0 34pt 0;}
#author {text-align: center; margin: 13pt 0 0 0; font-size: 13pt;}
#dateversion {text-align: center; margin: 0 0 24pt 0; font-size: 12pt;}
#purpose {text-align: justify; font-style: italic;}
#license {font-size: 7pt; color: gray; margin: 2pt 10pt 2pt 10pt; width: 200pt; float: right; white-space: pre;}
#history {width: 60%; font-size: 10pt; margin-left: auto; margin-right: auto;}
#history thead tr {background-color: #E0E0E0;}
#history td.date {text-align: right;}
#history td.version {text-align: center;}
#history td.desc {width: 100%; text-align: justify;}
#history td.name {text-align: left;}
#toc {margin: 70pt;}
#toc li {list-style: none;}
.section {margin: 70pt 70pt 70pt 100pt;}
.section h2, .section h3 {margin-left: -30pt;}
pre {font-family: Lucida Console; overflow: scroll;}
.center {margin-left: auto; margin-right: auto; text-align: center;}
span.bra {font-family: Arial Unicode MS;}
div.note {margin: 3pt; margin-bottom: 14pt; padding: 0 12pt 6pt 12pt; background-color: #E0E0E0;}
div.note h2 {
    margin: 0 -12pt 12pt -12pt;
    padding: 5pt;
    text-align: center;
    background-color: #606060;
    color: white;
    font-size: 14pt;
}
div.image {text-align: center;}
div.image img {padding: 10px; border: dashed thin black;}
/*]]>*/
</style>
</head>

<body>
    <div id="header"><h1 id="title">HTML Filter</h1><h2 id="author">Gabriele Santilli</h2><h2 id="dateversion">4.2.0</h2><p id="purpose">
        Filters HTML text removing any potential security treat;
        allows embedding some HTML coming from an untrusted source
        in a web page without creating security holes for the web site.
    </p><div id="license">
        =================================
        A message from Silent Software about this source code:

        We have selected the MIT license (as of 2010-Jan-1) because
        it is the closest “standard” license to our intent.  If we had our way,
        we would declare this source as public domain, with absolutely no
        strings attached, not even the string that says you have to have
        strings.  We want to help people, so please feel free to contact us
        if you have questions.
         

        (you only need to include the standard license text below in your
        homage to this source code)
        =================================

        Copyright 2009 Qtask, Inc.
        Copyright 2012 Silent Software, Inc.

        Permission is hereby granted, free of charge, to any person obtaining
        a copy of this software and associated documentation files
        (the "Software"), to deal in the Software without restriction, including
        without limitation the rights to use, copy, modify, merge, publish,
        distribute, sublicense, and/or sell copies of the Software, and to
        permit persons to whom the Software is furnished to do so, subject
        to the following conditions:

        The above copyright notice and this permission notice shall be included
        in all copies or substantial portions of the Software.

        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
        OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
        THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
        OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
        ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
        OTHER DEALINGS IN THE SOFTWARE.
    </div></div><div id="toc"><h2>Contents:</h2><ul><li><a href="#section-1">1. Introduction</a></li><li><a href="#section-2">2. Overview</a></li><ul><li><a href="#section-2.1">2.1 Filtering options</a></li></ul><li><a href="#section-3">3. URI filtering</a></li><li><a href="#section-4">4. Parse and regenerate the <span class="code"><span class="word">html</span></span> text</a></li><ul><li><a href="#section-4.1">4.1 <span class="code"><span class="word">filter-html</span></span>'s locals</a></li></ul><li><a href="#section-5">5. Filtering rules</a></li><li><a href="#section-6">6. Support functions</a></li><ul><li><a href="#section-6.1">6.1 Allowed tag attributes</a></li><li><a href="#section-6.2">6.2 Attribute types</a></li></ul></ul></div><div class="section"><h2 id="section-1">1. Introduction</h2><p>It is often desirable, for certain kinds of web sites (wikis, forums, blogs, and so on),
to allow advanced users to customize any text input using HTML tags; in some cases,
where the site allows users to publish new pages or edit existing content, allowing
users to edit the HTML directly is even more desirable. However, if you can't trust the
users, allowing HTML means opening up to a number of vulnerabilities (especially cross-site
scripting, phishing, etc.); the solution to the problem is to "sanitize" any HTML text
coming from an untrusted source before embedding it in the final web page. If all potentially
harmful content is removed, it is possible to safely embed the HTML into any page.</p></div><div class="section"><h2 id="section-2">2. Overview</h2><p>This program defines the <span class="code"><span class="word">filter-html</span></span> function, that can be used to sanitize any HTML
text. The string passed as argument is fully parsed and completely regenerated as
HTML 4.01 Transitional (or XHTML 1.0 Strict if the source document was XHTML), which is returned as a string.</p><p>If the <span class="code"><span class="refinement">/all</span></span> refinement is used, a complete HTML document is returned; otherwise,
the text returned contains only the "body" part of the document and can be embedded
directly inside another HTML document.</p><p>More options can be specified with the <span class="code"><span class="refinement">/with</span></span> refinement, followed by a block
containing <span class="code"><span class="word datatype"title="">set-word!</span></span>'s and values. See below for the list of available options
you can set.</p><div class="note"><h2>Note:</h2><p>The source <span class="code"><span class="word">html</span></span> string is assumed to use the UTF-8 encoding. If your text uses any
other encoding, you <strong>must</strong> convert it to UTF-8 before calling this function.</p><p>The output string will always be ASCII (all non-ASCII characters will be converted
to a character entity), unless the <span class="code"><span class="word">emit-utf8</span></span> option is set to <span class="code"><span class="word">true</span></span>, in which case the output
string will be UTF-8 encoded.</p></div><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Overview<span class="bra">&#9002;</span> &#8801;</p><p><span class="ref"><span class="bra">&#9001;</span><a href="#section-5">Filtering rules</a><span class="bra">&#9002;</span></span><br /><span class="ref"><span class="bra">&#9001;</span><a href="#section-6">Support functions</a><span class="bra">&#9002;</span></span><br /><br /><span class="set-word">filter-html:</span> <span class="word key"title="FUNC spec body">func</span> [<br /><span class="tab">&nbsp;</span><span class="string">"Sanitize HTML text"</span><br /><span class="tab">&nbsp;</span><span class="word">html</span> [<span class="word datatype"title="">string!</span>]<br /><span class="tab">&nbsp;</span><span class="refinement">/all</span> <span class="string">{Return a complete HTML document (including &lt;html&gt; tag, &lt;head&gt; etc.)}</span><br /><span class="tab">&nbsp;</span><span class="refinement">/with</span> <span class="word">options</span> [<span class="word datatype"title="">block!</span>] <span class="string">"Specify options for the filter"</span><br /><br /><span class="tab">&nbsp;</span><span class="refinement">/local</span> <span class="ref"><span class="bra">&#9001;</span><a href="#section-4.1"><span class="code"><span class="word">filter-html</span></span>'s locals</a><span class="bra">&#9002;</span></span><br />] [<br /><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-4">Parse and regenerate the <span class="code"><span class="word">html</span></span> text</a><span class="bra">&#9002;</span></span><br />]</p></div><h3 id="section-2.1">2.1 Filtering options</h3><p>The <span class="code"><span class="refinement">/with</span></span> refinement of <span class="code"><span class="word">filter-html</span></span> allows passing a block of <span class="code"><span class="word datatype"title="">set-word!</span></span>'s to set
specific filtering options. The available options are:</p><dl><dt><span class="code"><span class="word key"title="ALL block">all</span></span></dt><dd>equivalent to the <span class="code"><span class="refinement">/all</span></span> refinement (<span class="code"><span class="word datatype"title="">logic!</span></span>).
<dd><dt><span class="code"><span class="word">id-prefix</span></span></dt><dd>allows specifying a prefix to be prepended to all tag IDs (or anchor names,
and so on) that are specified in the source document (thus preventing clashes with IDs
in the host document). If you are embedding the filtered HTML in a document that makes use
of IDs, anchors etc., then you <strong>should</strong> specify an <span class="code"><span class="word">id-prefix</span></span> that
ensures no clashes. (Note: currently the CSS is not being parsed, so references to IDs in
the CSS will break when this is used.) If specified, it must be a <span class="code"><span class="word datatype"title="">string!</span></span> value,
and be valid as an HTML tag ID encoded in UTF-8.
<dd><dt><span class="code"><span class="word">emit-utf8</span></span></dt><dd>can be used to disable the conversion of all non-ASCII characters
to HTML entities (e.g. if your page is in Japanese then you don't want every character
to be encoded as an HTML entity, as that would take much more space than UTF-8). Should
be a <span class="code"><span class="word datatype"title="">logic!</span></span> value.
<dd><dt><span class="code"><span class="word">filter-uris</span></span></dt><dd>allows specifying a handler function for all URIs that appear in the document.
See <span class="code"><span class="ref"><span class="bra">&#9001;</span><a href="#section-3">URI filtering</a><span class="bra">&#9002;</span></span></span> for more details.
<dd><dt><span class="code"><span class="word">pretty-print</span></span></dt><dd>set to true to add indentation and newlines to the output.
<dd></dl><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Filtering options<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">default-options:</span> <span class="word key"title="CONTEXT blk">context</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">all:</span> <span class="word">no</span><br /><span class="tab">&nbsp;</span><span class="set-word">id-prefix:</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="set-word">emit-utf8:</span> <span class="word">no</span><br /><span class="tab">&nbsp;</span><span class="set-word">filter-uris:</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="set-word">pretty-print:</span> <span class="word">no</span><br />]</p></div></div><div class="section"><h2 id="section-3">3. URI filtering</h2><p>You can provide a filter function for all URIs in the HTML document via the <span class="code"><span class="word">filter-uris</span></span> option.
The option must be set to a function taking one object as argument and returning <span class="code"><span class="word">none</span></span>, a string, or
an object. The object passed as argument is what is returned by <span class="code"><span class="word">parse-uri</span></span>, with the addition of two
fields: <span class="code"><span class="word">tag-name</span></span> and <span class="code"><span class="word">attribute-name</span></span>, set to the name of the tag (a string, that may end in "/"
for empty tags) and the name of the attribute (as a <span class="code"><span class="word datatype"title="">word!</span></span>) the URI is in.</p><p>If your function returns <span class="code"><span class="word">none</span></span>, the attribute is discarded. If a <span class="code"><span class="word datatype"title="">string!</span></span> value is returned, that
is used as the value for the attribute (should be a correctly formed URI); otherwise, you can return
an object that is passed to <span class="code"><span class="word">form-uri</span></span> (for eg. you can just modify the object passed as argument and
return it).</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>URI filtering<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">uri-filter:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">uri</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="CASE block /all">case</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="ALL block">all</span> [<span class="path"><span class="word">uri</span>/<span class="word">tag-name</span></span> <span class="word key"title="= value1 value2">=</span> <span class="lit-word">'img</span> <span class="path"><span class="word">uri</span>/<span class="word">attribute-name</span></span> <span class="word key"title="= value1 value2">=</span> <span class="lit-word">'src</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; disable images</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word">uri</span>/<span class="word">host</span></span> <span class="word key"title="= value1 value2">=</span> <span class="string">"www2.site.com"</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; replace domain</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-path">uri/host:</span> <span class="string">"www.site.com"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">uri</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word">uri</span>/<span class="word">scheme</span></span> <span class="word key"title="= value1 value2">=</span> <span class="string">"javascript"</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; disable javascript: urls</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; and so on...</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="path"><span class="word">filter-html</span>/<span class="word">with</span></span> <span class="string">"..."</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">filter-uris:</span> <span class="get-word">:uri-filter</span><br />]</p></div></div><div class="section"><h2 id="section-4">4. Parse and regenerate the <span class="code"><span class="word">html</span></span> text</h2><p>The HTML text is parsed into a tree using <span class="code"><span class="word">load-html</span></span>, and a set of custom rules for the niwashi.
The rules do most of the job of filtering. We then normalize the tree to an XHTML 1.0 one, and
form it back to HTML text.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Parse and regenerate the <span class="code"><span class="word">html</span></span> text<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">options:</span> <span class="word key"title="MAKE type spec">make</span> <span class="word">default-options</span> <span class="word key"title="ANY block">any</span> [<span class="word">options</span> [ ]]<br /><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<span class="set-path">options/all:</span> <span class="word">yes</span>]<br /><span class="set-word">current-options:</span> <span class="word">options</span><br /><span class="set-word">filter-uris?:</span> <span class="word key"title="ANY-FUNCTION? value">any-function?</span> <span class="word key"title="GET word /any">get</span> <span class="word key"title="IN object word">in</span> <span class="word">options</span> <span class="lit-word">'filter-uris</span><br /><span class="set-word">tree:</span> <span class="path"><span class="word">load-html</span>/<span class="word">with</span></span> <span class="word">html</span> <span class="word">filter-rules</span><br /><span class="word key"title="EITHER condition true-block false-block">either</span> <span class="path"><span class="word">options</span>/<span class="word key"title="ALL block">all</span></span> [<br /><span class="tab">&nbsp;</span><span class="set-word">result:</span> <span class="word">make-node</span> <span class="lit-word">'root</span><br /><span class="tab">&nbsp;</span><span class="set-word">doctype:</span> <span class="word">get-node</span> <span class="path"><span class="word">tree</span>/<span class="word">childs</span>/<span class="word">declaration</span></span><br /><span class="tab">&nbsp;</span><span class="set-word">doctype:</span> <span class="word key"title="CASE block /all">case</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="NONE? value">none?</span> <span class="word">doctype</span> [<span class="lit-word">'none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">xhtml</span> <span class="word key"title="= value1 value2">=</span> <span class="word">get-node</span> <span class="path"><span class="word">doctype</span>/<span class="word">prop</span>/<span class="word">value</span></span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word">make-node</span> <span class="lit-word">'xml-proc</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/prop/value:</span> <span class="tag">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">result</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word">make-node</span> <span class="lit-word">'declaration</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/prop/value:</span> <span class="word">xhtml</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">result</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="lit-word">'xhtml</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">html4</span> <span class="word key"title="= value1 value2">=</span> <span class="word">get-node</span> <span class="path"><span class="word">doctype</span>/<span class="word">prop</span>/<span class="word">value</span></span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word">make-node</span> <span class="lit-word">'declaration</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/prop/value:</span> <span class="word">html4</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">result</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="lit-word">'html4</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="lit-word">'else</span> [<span class="lit-word">'none</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">html:</span> <span class="word">make-node</span> <span class="lit-word">'html</span><br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word">doctype</span> <span class="word key"title="= value1 value2">=</span> <span class="lit-word">'xhtml</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">html/prop/xmlns:</span> <span class="url">http://www.w3.org/1999/xhtml</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">html/parent:</span> <span class="word">result</span><br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">lang:</span> <span class="word">get-node</span> <span class="path"><span class="word">tree</span>/<span class="word">childs</span>/<span class="word">html</span>/<span class="word">prop</span>/<span class="word">lang</span></span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">html/properties:</span> [<span class="set-word">lang:</span> <span class="word">lang</span> <span class="set-path">xml/lang:</span> <span class="word">lang</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word">get-node</span> <span class="path"><span class="word">tree</span>/<span class="word">childs</span>/<span class="word">html</span>/<span class="word">childs</span>/<span class="word key"title="HEAD series">head</span></span><br /><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">html</span><br /><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word">get-node</span> <span class="path"><span class="word">tree</span>/<span class="word">childs</span>/<span class="word">html</span>/<span class="word">childs</span>/<span class="word">body</span></span><br /><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">html</span><br />] [<br /><span class="tab">&nbsp;</span><span class="set-word">result:</span> <span class="word">get-node</span> <span class="path"><span class="word">tree</span>/<span class="word">childs</span>/<span class="word">html</span>/<span class="word">childs</span>/<span class="word">body</span></span><br />]<br /><span class="path"><span class="word">form-html</span>/<span class="word">with</span></span> <span class="word">result</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">utf8?:</span> <span class="path"><span class="word">options</span>/<span class="word">emit-utf8</span></span><br /><span class="tab">&nbsp;</span><span class="set-word">pretty?:</span> <span class="path"><span class="word">options</span>/<span class="word">pretty-print</span></span><br />]</p></div><h3 id="section-4.1">4.1 <span class="code"><span class="word">filter-html</span></span>'s locals</h3><div class="code"><p class="sectdef"><span class="bra">&#9001;</span><span class="code"><span class="word">filter-html</span></span>'s locals<span class="bra">&#9002;</span> &#8801;</p><p><span class="word">tree</span> <span class="word">result</span> <span class="word">node</span> <span class="word">lang</span> <span class="word">doctype</span></p></div></div><div class="section"><h2 id="section-5">5. Filtering rules</h2><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Filtering rules<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">filter-rules:</span> [<br /><span class="tab">&nbsp;</span><span class="word">always</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">ignore</span> [<span class="word">object</span> <span class="word">param</span> <span class="word">applet</span> <span class="word key"title="COMMENT value">comment</span> <span class="word">meta</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> <span class="word">script</span> <span class="word">remove-script</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">except</span> [<span class="word">text</span> <span class="word">whitespace</span> <span class="word">xml-proc</span> <span class="word">declaration</span>] <span class="word">check-attributes</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">inside</span> <span class="word">style</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> <span class="word">text</span> <span class="word">sanitize-style</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> [<span class="word">i</span> <span class="word">u</span> <span class="word">b</span> <span class="word">em</span> <span class="word">strong</span> <span class="word">span</span> <span class="word">strike</span>] <span class="word">unwrap-empty-fmt</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> [<span class="word">i</span> <span class="word">u</span> <span class="word">b</span> <span class="word">em</span> <span class="word">strong</span> <span class="word">span</span> <span class="word">strike</span>] <span class="word">merge-with-previous</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> <span class="word">a</span> <span class="word">remove-empty-a</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">on</span> <span class="word">span</span> <span class="word">unwrap-noattrs</span><br /><span class="tab">&nbsp;</span>]<br />]</p></div></div><div class="section"><h2 id="section-6">6. Support functions</h2><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Support functions<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">xhtml:</span> <span class="string">{&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;}</span><br /><span class="set-word">html4:</span> <span class="string">{&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;}</span><br /><span class="ref"><span class="bra">&#9001;</span><a href="#section-2.1">Filtering options</a><span class="bra">&#9002;</span></span><br /><span class="ref"><span class="bra">&#9001;</span><a href="#section-6.1">Allowed tag attributes</a><span class="bra">&#9002;</span></span><br /><span class="set-word">!set-assoc:</span> <span class="word">macro</span> [<span class="word">assoc</span> <span class="word">word</span> <span class="word">value</span>] [<br /><span class="tab">&nbsp;</span>(<span class="get-word">:either</span>) <span class="set-word">_pos:</span> (<span class="get-word">:find</span>) <span class="word">assoc</span> <span class="word">word</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>(<span class="get-word">:poke</span>) <span class="word">_pos</span> <span class="integer">2</span> <span class="path"><span class="word">value</span>/<span class="word">only</span></span><br /><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span>/<span class="word">only</span></span> (<span class="get-word">:insert</span>) (<span class="get-word">:tail</span>) <span class="word">assoc</span> <span class="word">word</span> <span class="path"><span class="word">value</span>/<span class="word">only</span></span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">check-attributes:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span> <span class="refinement">/local</span> <span class="word">attributes</span> <span class="word">valid-attributes</span> <span class="word">value</span> <span class="word">uris</span> <span class="word">name</span> <span class="word">node-properties</span> <span class="word">pos</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="set-word">name:</span> <span class="word">!get-node-type</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="set-word">attributes:</span> <span class="word">!get-node-properties</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="set-word">node-properties:</span> <span class="word key"title="REDUCE value /only words">reduce</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="lit-word">'lang</span> <span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">process-attr</span> <span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes</span> <span class="lit-path">'xml/lang</span> <span class="lit-word">'name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">process-attr</span> <span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes</span> <span class="lit-word">'lang</span> <span class="lit-word">'name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">style:</span> <span class="word key"title="COPY value /part range /deep">copy</span> <span class="string">""</span><br /><span class="tab">&nbsp;</span><span class="set-word">uris:</span> <span class="word key"title="CLEAR series">clear</span> [ ]<br /><span class="tab">&nbsp;</span><span class="set-word">valid-attributes:</span> <span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes-map</span> <span class="word">name</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>[ ]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="FOREACH 'word data body">foreach</span> [<span class="word">attr-name</span> <span class="word">type</span> <span class="word">defvalue</span>] <span class="path"><span class="word key"title="UNION set1 set2 /case /skip size">union</span>/<span class="word key"title="SKIP series offset">skip</span></span> <span class="word">valid-attributes</span> <span class="word">global-attrs</span> <span class="integer">3</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span>/<span class="word">only</span></span> <span class="word key"title="INSERT series value /part range /only /dup count">insert</span> <span class="word key"title="TAIL series">tail</span> <span class="word">node-properties</span> <span class="word">attr-name</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">value:</span> <span class="word">process-attr</span> <span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes</span> <span class="word">attr-name</span> <span class="word">type</span> <span class="word">defvalue</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<span class="word">type</span> <span class="word key"title="= value1 value2">=</span> <span class="lit-word">'uri</span> <span class="word">value</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="APPEND series value /only">append</span> <span class="word">uris</span> <span class="word">attr-name</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="FOREACH 'word data body">foreach</span> <span class="word">uri</span> <span class="word">uris</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">pos:</span> <span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> <span class="word">node-properties</span> <span class="word">uri</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EITHER condition true-block false-block">either</span> <span class="word">filter-uris?</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">value:</span> <span class="path"><span class="word">current-options</span>/<span class="word">filter-uris</span></span> <span class="word key"title="MAKE type spec">make</span> <span class="word key"title="PICK series index">pick</span> <span class="word">pos</span> <span class="integer">2</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">tag-name:</span> <span class="word">name</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">attribute-name:</span> <span class="word">uri</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">target:</span> <span class="word">get-node</span> <span class="path"><span class="word">node</span>/<span class="word">prop</span>/<span class="word">target</span></span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EITHER condition true-block false-block">either</span> <span class="word key"title="OBJECT? value">object?</span> <span class="word">value</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="POKE value index data">poke</span> <span class="word">pos</span> <span class="integer">2</span> <span class="word">form-uri</span> <span class="word">value</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">!set-assoc</span> <span class="word">node-properties</span> <span class="lit-word">'target</span> <span class="path"><span class="word">value</span>/<span class="word">target</span></span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="POKE value index data">poke</span> <span class="word">pos</span> <span class="integer">2</span> <span class="word">value</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">value:</span> <span class="word key"title="PICK series index">pick</span> <span class="word">pos</span> <span class="integer">2</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="POKE value index data">poke</span> <span class="word">pos</span> <span class="integer">2</span> <span class="word key"title="EITHER condition true-block false-block">either</span> <span class="word key"title="ALL block">all</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word key"title="&lt;&gt; value1 value2">&lt;&gt;</span> <span class="lit-word">'iframe</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>#[<span class="word">none</span>] <span class="string">"http"</span> <span class="string">"https"</span> <span class="string">"ftp"</span> <span class="string">"telnet"</span> <span class="string">"news"</span> <span class="string">"mailto"</span> <span class="string">"nntp"</span> <span class="string">"gopher"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] <span class="path"><span class="word">value</span>/<span class="word">scheme</span></span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">form-uri</span> <span class="word">value</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">value:</span> <span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes</span> <span class="lit-word">'style</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="APPEND series value /only">append</span> <span class="word">style</span> <span class="word">value</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="NOT value">not</span> <span class="word key"title="EMPTY? series">empty?</span> <span class="word">style</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">!set-assoc</span> <span class="word">node-properties</span> <span class="lit-word">'style</span> (<span class="word">sanitize-css</span> <span class="word">style</span>)<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">fix-attrs</span> <span class="word">node-properties</span><br /><span class="tab">&nbsp;</span><span class="word">!set-node-properties</span> <span class="word">node</span> <span class="word">node-properties</span><br />]<br /><span class="set-word">fix-attrs:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">attributes</span> <span class="refinement">/local</span> <span class="word">lang</span> <span class="word">id</span> <span class="word">val</span> <span class="word">pos</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">lang:</span> <span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> <span class="word">attributes</span> <span class="lit-word">'lang</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="INSERT series value /part range /only /dup count">insert</span> <span class="path"><span class="word key"title="INSERT series value /part range /only /dup count">insert</span>/<span class="word">only</span></span> <span class="word key"title="TAIL series">tail</span> <span class="word">attributes</span> <span class="lit-path">'xml/lang</span> <span class="word">lang</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<span class="set-word">pos:</span> <span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> <span class="word">attributes</span> <span class="lit-word">'id</span> <span class="path"><span class="word">current-options</span>/<span class="word">id-prefix</span></span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="POKE value index data">poke</span> <span class="word">pos</span> <span class="integer">2</span> <span class="word key"title="JOIN value rest">join</span> <span class="path"><span class="word">current-options</span>/<span class="word">id-prefix</span></span> <span class="word key"title="PICK series index">pick</span> <span class="word">pos</span> <span class="integer">2</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="FORSKIP 'word skip-num body">forskip</span> <span class="word">attributes</span> <span class="integer">2</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<span class="word key"title="STRING? value">string?</span> <span class="set-word">val:</span> <span class="word key"title="PICK series index">pick</span> <span class="word">attributes</span> <span class="integer">2</span> <span class="word key"title="EMPTY? series">empty?</span> <span class="word">val</span>] [<span class="word key"title="POKE value index data">poke</span> <span class="word">attributes</span> <span class="integer">2</span> #[<span class="word">none</span>]]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">attributes</span><br />]<br /><span class="comment">; IE sucks</span><br /><span class="set-word">non-paren:</span> <span class="word key"title="COMPLEMENT value">complement</span> <span class="word key"title="CHARSET chars">charset</span> <span class="string">"()"</span><br /><span class="set-word">parens:</span> [<br /><span class="tab">&nbsp;</span><span class="char">#"("</span> <span class="word key"title="ANY block">any</span> <span class="word">non-paren</span> <span class="word key"title="ANY block">any</span> [<span class="word">parens</span> <span class="word key"title="ANY block">any</span> <span class="word">non-paren</span>] <span class="char">#")"</span><br />]<br /><span class="set-word">sanitize-css:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">css-text</span> [<span class="word datatype"title="">string!</span> <span class="word datatype"title="">none!</span>] <span class="refinement">/local</span> <span class="word">mk1</span> <span class="word">mk2</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="STRING? value">string?</span> <span class="word">css-text</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; safe but slow</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">;css-text: copy css-text</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; remove comments (IE sucks)</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="word">css-text</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="TO type spec">to</span> <span class="string">"/*"</span> <span class="set-word">mk1:</span> <span class="word">thru</span> <span class="string">"*/"</span> <span class="set-word">mk2:</span> (<span class="set-word">mk1:</span> <span class="path"><span class="word key"title="REMOVE series /part range">remove</span>/<span class="word">part</span></span> <span class="word">mk1</span> <span class="word">mk2</span>) <span class="get-word">:mk1</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; remove "expression( ... )" (IE sucks)</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="word">css-text</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="TO type spec">to</span> <span class="string">"expression"</span> <span class="set-word">mk1:</span> <span class="string">"expression"</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="ANY block">any</span> <span class="word">space-char</span> <span class="word">parens</span> <span class="set-word">mk2:</span> (<span class="set-word">mk1:</span> <span class="path"><span class="word key"title="REMOVE series /part range">remove</span>/<span class="word">part</span></span> <span class="word">mk1</span> <span class="word">mk2</span>) <span class="get-word">:mk1</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">css-text</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">process-attr:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">type</span> <span class="word">defvalue</span> <span class="refinement">/local</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="SWITCH value cases /default case">switch</span> <span class="word">defvalue</span> [<span class="word">none</span> [<span class="set-word">defvalue:</span> <span class="word">none</span>]]<br /><span class="tab">&nbsp;</span><span class="word key"title="UNLESS condition block">unless</span> <span class="word">value</span> [<span class="word key"title="RETURN value">return</span> <span class="word">defvalue</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="BLOCK? value">block?</span> <span class="word">type</span> [<span class="set-word">opts:</span> <span class="word key"title="NEXT series">next</span> <span class="word">type</span> <span class="set-word">type:</span> <span class="word key"title="FIRST series">first</span> <span class="word">type</span>]<br /><span class="tab">&nbsp;</span><span class="set-word">type:</span> <span class="word key"title="GET word /any">get</span> <span class="word key"title="IN object word">in</span> <span class="word">attr-types</span> <span class="word">type</span><br /><span class="tab">&nbsp;</span><span class="set-word">value:</span> <span class="word key"title="ANY block">any</span> [<span class="word">type</span> <span class="word">value</span> <span class="word">opts</span> <span class="word">defvalue</span>]<br />]<br /><span class="set-word">attr-types:</span> <span class="word key"title="CONTEXT blk">context</span> [<br /><span class="tab">&nbsp;</span><span class="ref"><span class="bra">&#9001;</span><a href="#section-6.2">Attribute types</a><span class="bra">&#9002;</span></span><br />]<br /><span class="set-word">global-attrs:</span> [<br /><span class="tab">&nbsp;</span><span class="word">dir</span> [<span class="word">enum</span> <span class="string">"LTR"</span> <span class="string">"RTL"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="word">id</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="word">class</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="word">title</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="word">bgcolor</span> [<span class="word">style*</span> <span class="word">color</span> <span class="string">"background-color"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="comment">; "middle" is wrong, but should be treated like "center"</span><br /><span class="tab">&nbsp;</span><span class="comment">; we'll need to convert it eventually...</span><br /><span class="tab">&nbsp;</span><span class="word">align</span> [<span class="word">enum</span> <span class="string">"left"</span> <span class="string">"center"</span> <span class="string">"middle"</span> <span class="string">"right"</span> <span class="string">"justify"</span>] <span class="word">none</span><br />]<br /><span class="set-word">sanitize-style:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word">sanitize-css</span> <span class="word">!get-node-property</span> <span class="word">node</span> <span class="lit-word">'value</span><br />]<br /><span class="set-word">unwrap-empty-fmt:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span> <span class="refinement">/local</span> <span class="word">childs</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word">!get-node-parent</span> <span class="word">node</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">childs:</span> <span class="word">!get-node-childs</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EMPTY? series">empty?</span> <span class="word">childs</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">br-only?</span> <span class="word">childs</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">unwrap-node</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">br-only?:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">childs</span> <span class="refinement">/local</span> <span class="word">node</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="ALL block">all</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="integer">1</span> <span class="word key"title="= value1 value2">=</span> <span class="word key"title="LENGTH? series">length?</span> <span class="word">childs</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">node:</span> <span class="word key"title="FIRST series">first</span> <span class="word">childs</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="lit-word">'br</span> <span class="word key"title="= value1 value2">=</span> <span class="word">!get-node-type</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">remove-empty-a:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EMPTY? series">empty?</span> <span class="word">!get-node-childs</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="NOT value">not</span> <span class="word">!get-node-property</span> <span class="word">node</span> <span class="lit-word">'name</span><br /><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">!remove-node-quick</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">unwrap-noattrs:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word">!get-node-parent</span> <span class="word">node</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="UNLESS condition block">unless</span> <span class="word key"title="FOREACH 'word data body">foreach</span> [<span class="word">name</span> <span class="word">value</span>] <span class="word">!get-node-properties</span> <span class="word">node</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="UNLESS condition block">unless</span> <span class="word key"title="NONE? value">none?</span> <span class="word">value</span> [<span class="path"><span class="word key"title="BREAK /return value">break</span>/<span class="word key"title="RETURN value">return</span></span> <span class="word">true</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">unwrap-node</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">merge-with-previous:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span> <span class="refinement">/local</span> <span class="word">prev</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">prev:</span> <span class="word">!get-node-previous</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EQUAL? value1 value2">equal?</span> <span class="word">!get-node-type</span> <span class="word">node</span> <span class="word">!get-node-type</span> <span class="word">prev</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="EQUAL? value1 value2">equal?</span> <span class="word">!get-node-properties</span> <span class="word">node</span> <span class="word">!get-node-properties</span> <span class="word">prev</span><br /><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">set-node</span> <span class="set-path">node/parent:</span> <span class="word">prev</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">unwrap-node</span> <span class="word">node</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">remove-script:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">node</span>] <span class="word">expand-macros</span> [<br /><span class="tab">&nbsp;</span><span class="word">!remove-node-quick</span> <span class="word">node</span><br />]</p></div><h3 id="section-6.1">6.1 Allowed tag attributes</h3><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Allowed tag attributes<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">attributes-map:</span> [<br /><span class="tab">&nbsp;</span><span class="word">body</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">background</span> [<span class="word">style*</span> <span class="word">uri</span> <span class="string">"background-image"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">text</span> [<span class="word">style*</span> <span class="word">color</span> <span class="string">"color"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">link</span> <span class="word">color</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">vlink</span> <span class="word">color</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">alink</span> <span class="word">color</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">title</span> [ ]<br /><span class="tab">&nbsp;</span><span class="word">base</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">href</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">target</span> [<span class="word">enum</span> <span class="string">"_blank"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">style</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> <span class="word">force</span> <span class="string">"text/css"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">media</span> <span class="word">media-desc</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">link</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">href</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">hreflang</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rel</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rev</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="CHARSET chars">charset</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">target</span> [<span class="word">enum</span> <span class="string">"_blank"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">media</span> <span class="word">media-desc</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">ul</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"disc"</span> <span class="string">"circle"</span> <span class="string">"square"</span>] <span class="string">"list-style-type"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">ol</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> [<span class="word">style*</span> <span class="word">list-style</span> <span class="string">"list-style-type"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">start</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">blockquote</span> [<span class="word">cite</span> <span class="word">uri</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="FORM value">form</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">action</span> <span class="word">force</span> <span class="string">"#"</span> <span class="comment">; disable forms!</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">method</span> <span class="word">force</span> <span class="string">"GET"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">table</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">summary</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">align</span> [<span class="word">enum</span> <span class="string">"left"</span> <span class="string">"center"</span> <span class="string">"right"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">frame</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">enum</span> <span class="string">"void"</span> <span class="string">"above"</span> <span class="string">"below"</span> <span class="string">"hsides"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lhs"</span> <span class="string">"rhs"</span> <span class="string">"vsides"</span> <span class="string">"box"</span> <span class="string">"border"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rules</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">enum</span> <span class="string">"none"</span> <span class="string">"groups"</span> <span class="string">"rows"</span> <span class="string">"cols"</span> <span class="string">"all"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">border</span> [<span class="word">style*</span> <span class="word">pixels</span> <span class="string">"border-width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">cellspacing</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">cellpadding</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">ins</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">cite</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">datetime</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">del</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">cite</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">datetime</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">hr</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; this is quite hard to convert to CSS automatically</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; so will keep the deprecated attributes</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">align</span> [<span class="word">enum</span> <span class="string">"left"</span> <span class="string">"right"</span> <span class="string">"center"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">noshade</span> [<span class="word">bool</span> <span class="string">"noshade"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">size</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">br</span> [<span class="word key"title="CLEAR series">clear</span> <span class="word">brclear</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="word">a</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">;name     name*                                   none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; in the real world name may be an arbitrary string</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">href</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">hreflang</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rel</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rev</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="CHARSET chars">charset</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">target</span> [<span class="word">enum</span> <span class="string">"_blank"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">shape</span> [<span class="word">enum</span> <span class="string">"default"</span> <span class="string">"rect"</span> <span class="string">"circle"</span> <span class="string">"poly"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">coords</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">map</span> [<span class="word">name</span> <span class="word">name*</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="word">area</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">shape</span> [<span class="word">enum</span> <span class="string">"default"</span> <span class="string">"rect"</span> <span class="string">"circle"</span> <span class="string">"poly"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">coords</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">nohref</span> [<span class="word">bool</span> <span class="string">"nohref"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">alt</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">href</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">target</span> [<span class="word">enum</span> <span class="string">"_blank"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">size</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">multiple</span> [<span class="word">bool</span> <span class="string">"multiple"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">textarea</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rows</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">cols</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">readonly</span> [<span class="word">bool</span> <span class="string">"readonly"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">button</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> [<span class="word">enum</span> <span class="string">"submit"</span> <span class="string">"button"</span> <span class="string">"reset"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">label</span> [<span class="word key"title="FOR 'word start end bump body">for</span> <span class="word">name*</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="INPUT /hide">input</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">enum</span> <span class="string">"text"</span> <span class="string">"password"</span> <span class="string">"checkbox"</span> <span class="string">"radio"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"submit"</span> <span class="string">"reset"</span> <span class="string">"file"</span> <span class="string">"hidden"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"image"</span> <span class="string">"button"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">size</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">maxlength</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">checked</span> [<span class="word">bool</span> <span class="string">"checked"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">src</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">alt</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">accept</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">readonly</span> [<span class="word">bool</span> <span class="string">"readonly"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">usemap</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">ismap</span> [<span class="word">bool</span> <span class="string">"ismap"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="Q /return value">q</span> [<span class="word">cite</span> <span class="word">uri</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="word">img</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">src</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">alt</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">longdesc</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">usemap</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">ismap</span> [<span class="word">bool</span> <span class="string">"ismap"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">height</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">hspace</span> [<span class="word">imgmargin</span> <span class="string">"left"</span> <span class="string">"right"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">vspace</span> [<span class="word">imgmargin</span> <span class="string">"top"</span> <span class="string">"bottom"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">border</span> [<span class="word">style*</span> <span class="word">pixels</span> <span class="string">"border-width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">align</span> <span class="word">imgalign</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">li</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> [<span class="word">style*</span> <span class="word">list-style</span> <span class="string">"list-style-type"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">colgroup</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">span</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> <span class="word">multi-length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">col</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">span</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> <span class="word">multi-length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">thead</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">tfoot</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">tbody</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">tr</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">td</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">headers</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">scope</span> [<span class="word">enum</span> <span class="string">"row"</span> <span class="string">"col"</span> <span class="string">"rowgroup"</span> <span class="string">"colgroup"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">abbr</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">axis</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rowspan</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">colspan</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">nowrap</span> [<span class="word">style*</span> [<span class="word">bool</span> <span class="string">"nowrap"</span>] <span class="string">"white-space"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">height</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"height"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; char alignment not supported (browsers do not support it anyway)</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; non-standard</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">background</span> [<span class="word">style*</span> <span class="word">uri</span> <span class="string">"background-image"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">th</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">headers</span> <span class="word">name-list</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">scope</span> [<span class="word">enum</span> <span class="string">"row"</span> <span class="string">"col"</span> <span class="string">"rowgroup"</span> <span class="string">"colgroup"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">abbr</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">axis</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">rowspan</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">colspan</span> <span class="word">number</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">nowrap</span> [<span class="word">style*</span> [<span class="word">bool</span> <span class="string">"nowrap"</span>] <span class="string">"white-space"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">height</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"height"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; char alignment not supported (browsers do not support it anyway)</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">valign</span> [<span class="word">style*</span> [<span class="word">enum</span> <span class="string">"baseline"</span> <span class="string">"top"</span> <span class="string">"bottom"</span> <span class="string">"middle"</span>] <span class="string">"vertical-align"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; non-standard</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">background</span> [<span class="word">style*</span> <span class="word">uri</span> <span class="string">"background-image"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">option</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">selected</span> [<span class="word">bool</span> <span class="string">"selected"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">label</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">optgroup</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">label</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">disabled</span> <span class="word">force</span> <span class="string">"disabled"</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="comment">; gets converted to a span</span><br /><span class="tab">&nbsp;</span><span class="word">font</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">size</span> <span class="word">font-size</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">color</span> [<span class="word">style*</span> <span class="word">color</span> <span class="string">"color"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">face</span> [<span class="word">style*</span> <span class="word">cdata</span> <span class="string">"font-family"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">iframe</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">src</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">name</span> <span class="word">name*</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">height</span> [<span class="word">style*</span> <span class="word">lengthpx</span> <span class="string">"height"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">frameborder</span> [<span class="word">style*</span> <span class="word">pixels</span> <span class="string">"border-width"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="comment">; youtube/vimeo iframe tags</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">allowfullscreen</span> [<span class="word">bool</span> <span class="string">"allowfullscreen"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">mozallowfullscreen</span> [<span class="word">bool</span> <span class="string">"mozallowfullscreen"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">webkitallowfullscreen</span> [<span class="word">bool</span> <span class="string">"webkitallowfullscreen"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">video</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">autoplay</span> [<span class="word">bool</span> <span class="string">"autoplay"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">preload</span> [<span class="word">enum</span> <span class="string">"none"</span> <span class="string">"metadata"</span> <span class="string">"auto"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">controls</span> [<span class="word">bool</span> <span class="string">"controls"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="LOOP count block">loop</span> [<span class="word">bool</span> <span class="string">"loop"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">poster</span> <span class="word">uri</span> <span class="word">none</span> <br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">width</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">height</span> <span class="word">length</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">mediagroup</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">muted</span> [<span class="word">bool</span> <span class="string">"muted"</span>] <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">src</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word key"title="SOURCE 'word">source</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">src</span> <span class="word">uri</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">type</span> <span class="word">cdata</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">media</span> <span class="word">media-desc</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br />]</p></div><h3 id="section-6.2">6.2 Attribute types</h3><p>These are the validation/handling functions for various attribute types.</p><div class="code"><p class="sectdef"><span class="bra">&#9001;</span>Attribute types<span class="bra">&#9002;</span> &#8801;</p><p><span class="set-word">enum:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">value:</span> <span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> <span class="word">opts</span> <span class="word">value</span> [<span class="path"><span class="word">value</span>/<span class="integer">1</span></span>]<br />]<br /><span class="set-word">name*:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">name</span>] [<span class="word">value</span>]<br />]<br /><span class="set-word">name-list:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">name</span> <span class="word key"title="ANY block">any</span> [<span class="string">" "</span> <span class="word">name</span>]] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">force:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<span class="word">none</span>] <span class="comment">; force default</span><br /><span class="set-word">style*:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">value:</span> <span class="word">process-attr</span> <span class="word">value</span> <span class="path"><span class="word">opts</span>/<span class="integer">1</span></span> <span class="word">none</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="REPEND series value /only">repend</span> <span class="word">style</span> <span class="word key"title="EITHER condition true-block false-block">either</span> <span class="path"><span class="word">opts</span>/<span class="integer">1</span></span> <span class="word key"title="= value1 value2">=</span> <span class="lit-word">'uri</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>[<span class="path"><span class="word">opts</span>/<span class="integer">2</span></span> <span class="string">": url('"</span> <span class="word">form-uri</span> <span class="word">value</span> <span class="string">"');"</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>[<span class="path"><span class="word">opts</span>/<span class="integer">2</span></span> <span class="string">": "</span> <span class="word">value</span> <span class="string">";"</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">none</span><br />]<br /><span class="set-word">color:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"#"</span> <span class="integer">3</span> <span class="integer">6</span> <span class="word">hexdigit</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"aliceblue"</span> <span class="word">|</span> <span class="string">"antiquewhite"</span> <span class="word">|</span> <span class="string">"aqua"</span> <span class="word">|</span> <span class="string">"aquamarine"</span> <span class="word">|</span> <span class="string">"azure"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"beige"</span> <span class="word">|</span> <span class="string">"bisque"</span> <span class="word">|</span> <span class="string">"black"</span> <span class="word">|</span> <span class="string">"blanchedalmond"</span> <span class="word">|</span> <span class="string">"blue"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"blueviolet"</span> <span class="word">|</span> <span class="string">"brown"</span> <span class="word">|</span> <span class="string">"burlywood"</span> <span class="word">|</span> <span class="string">"cadetblue"</span> <span class="word">|</span> <span class="string">"chartreuse"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"chocolate"</span> <span class="word">|</span> <span class="string">"coral"</span> <span class="word">|</span> <span class="string">"cornflowerblue"</span> <span class="word">|</span> <span class="string">"cornsilk"</span> <span class="word">|</span> <span class="string">"crimson"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"cyan"</span> <span class="word">|</span> <span class="string">"darkblue"</span> <span class="word">|</span> <span class="string">"darkcyan"</span> <span class="word">|</span> <span class="string">"darkgoldenrod"</span> <span class="word">|</span> <span class="string">"darkgray"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"darkgreen"</span> <span class="word">|</span> <span class="string">"darkkhaki"</span> <span class="word">|</span> <span class="string">"darkmagenta"</span> <span class="word">|</span> <span class="string">"darkolivegreen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"darkorange"</span> <span class="word">|</span> <span class="string">"darkorchid"</span> <span class="word">|</span> <span class="string">"darkred"</span> <span class="word">|</span> <span class="string">"darksalmon"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"darkseagreen"</span> <span class="word">|</span> <span class="string">"darkslateblue"</span> <span class="word">|</span> <span class="string">"darkslategray"</span> <span class="word">|</span> <span class="string">"darkturquoise"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"darkviolet"</span> <span class="word">|</span> <span class="string">"deeppink"</span> <span class="word">|</span> <span class="string">"deepskyblue"</span> <span class="word">|</span> <span class="string">"dimgray"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"dodgerblue"</span> <span class="word">|</span> <span class="string">"feldspar"</span> <span class="word">|</span> <span class="string">"firebrick"</span> <span class="word">|</span> <span class="string">"floralwhite"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"forestgreen"</span> <span class="word">|</span> <span class="string">"fuchsia"</span> <span class="word">|</span> <span class="string">"gainsboro"</span> <span class="word">|</span> <span class="string">"ghostwhite"</span> <span class="word">|</span> <span class="string">"gold"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"goldenrod"</span> <span class="word">|</span> <span class="string">"gray"</span> <span class="word">|</span> <span class="string">"green"</span> <span class="word">|</span> <span class="string">"greenyellow"</span> <span class="word">|</span> <span class="string">"honeydew"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"hotpink"</span> <span class="word">|</span> <span class="string">"indianred"</span> <span class="word">|</span> <span class="string">"indigo"</span> <span class="word">|</span> <span class="string">"ivory"</span> <span class="word">|</span> <span class="string">"khaki"</span> <span class="word">|</span> <span class="string">"lavender"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lavenderblush"</span> <span class="word">|</span> <span class="string">"lawngreen"</span> <span class="word">|</span> <span class="string">"lemonchiffon"</span> <span class="word">|</span> <span class="string">"lightblue"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lightcoral"</span> <span class="word">|</span> <span class="string">"lightcyan"</span> <span class="word">|</span> <span class="string">"lightgoldenrodyellow"</span> <span class="word">|</span> <span class="string">"lightgreen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lightgrey"</span> <span class="word">|</span> <span class="string">"lightpink"</span> <span class="word">|</span> <span class="string">"lightsalmon"</span> <span class="word">|</span> <span class="string">"lightseagreen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lightskyblue"</span> <span class="word">|</span> <span class="string">"lightslateblue"</span> <span class="word">|</span> <span class="string">"lightslategray"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"lightsteelblue"</span> <span class="word">|</span> <span class="string">"lightyellow"</span> <span class="word">|</span> <span class="string">"lime"</span> <span class="word">|</span> <span class="string">"limegreen"</span> <span class="word">|</span> <span class="string">"linen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"magenta"</span> <span class="word">|</span> <span class="string">"maroon"</span> <span class="word">|</span> <span class="string">"mediumaquamarine"</span> <span class="word">|</span> <span class="string">"mediumblue"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"mediumorchid"</span> <span class="word">|</span> <span class="string">"mediumpurple"</span> <span class="word">|</span> <span class="string">"mediumseagreen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"mediumslateblue"</span> <span class="word">|</span> <span class="string">"mediumspringgreen"</span> <span class="word">|</span> <span class="string">"mediumturquoise"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"mediumvioletred"</span> <span class="word">|</span> <span class="string">"midnightblue"</span> <span class="word">|</span> <span class="string">"mintcream"</span> <span class="word">|</span> <span class="string">"mistyrose"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"moccasin"</span> <span class="word">|</span> <span class="string">"navajowhite"</span> <span class="word">|</span> <span class="string">"navy"</span> <span class="word">|</span> <span class="string">"oldlace"</span> <span class="word">|</span> <span class="string">"olive"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"olivedrab"</span> <span class="word">|</span> <span class="string">"orange"</span> <span class="word">|</span> <span class="string">"orangered"</span> <span class="word">|</span> <span class="string">"orchid"</span> <span class="word">|</span> <span class="string">"palegoldenrod"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"palegreen"</span> <span class="word">|</span> <span class="string">"paleturquoise"</span> <span class="word">|</span> <span class="string">"palevioletred"</span> <span class="word">|</span> <span class="string">"papayawhip"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"peachpuff"</span> <span class="word">|</span> <span class="string">"peru"</span> <span class="word">|</span> <span class="string">"pink"</span> <span class="word">|</span> <span class="string">"plum"</span> <span class="word">|</span> <span class="string">"powderblue"</span> <span class="word">|</span> <span class="string">"purple"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"red"</span> <span class="word">|</span> <span class="string">"rosybrown"</span> <span class="word">|</span> <span class="string">"royalblue"</span> <span class="word">|</span> <span class="string">"saddlebrown"</span> <span class="word">|</span> <span class="string">"salmon"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"sandybrown"</span> <span class="word">|</span> <span class="string">"seagreen"</span> <span class="word">|</span> <span class="string">"seashell"</span> <span class="word">|</span> <span class="string">"sienna"</span> <span class="word">|</span> <span class="string">"silver"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"skyblue"</span> <span class="word">|</span> <span class="string">"slateblue"</span> <span class="word">|</span> <span class="string">"slategray"</span> <span class="word">|</span> <span class="string">"snow"</span> <span class="word">|</span> <span class="string">"springgreen"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"steelblue"</span> <span class="word">|</span> <span class="string">"tan"</span> <span class="word">|</span> <span class="string">"teal"</span> <span class="word">|</span> <span class="string">"thistle"</span> <span class="word">|</span> <span class="string">"tomato"</span> <span class="word">|</span> <span class="string">"turquoise"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"violet"</span> <span class="word">|</span> <span class="string">"violetred"</span> <span class="word">|</span> <span class="string">"wheat"</span> <span class="word">|</span> <span class="string">"white"</span> <span class="word">|</span> <span class="string">"whitesmoke"</span> <span class="word">|</span> <span class="string">"yellow"</span> <span class="word">|</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"yellowgreen"</span> <span class="word">|</span> <span class="string">"transparent"</span><br /><span class="tab">&nbsp;</span>] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">uri:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="MAKE type spec">make</span> <span class="path"><span class="word">parse-uri</span>/<span class="word">relative</span></span> <span class="word">value</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">source-uri:</span> <span class="word">value</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">cdata:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word">value</span> [<span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span>]]<br /><span class="set-word">media-desc:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span> <span class="refinement">/local</span> <span class="word">names</span> <span class="word">nm</span>] [<br /><span class="tab">&nbsp;</span><span class="set-word">names:</span> <span class="word key"title="CLEAR series">clear</span> [ ]<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="ALL block">all</span> [<span class="word">value</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="COPY value /part range /deep">copy</span> <span class="word">nm</span> <span class="word">name</span> (<span class="word key"title="APPEND series value /only">append</span> <span class="word">names</span> <span class="word">nm</span>)<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">thru</span> <span class="string">","</span> <span class="word">opt</span> <span class="string">" "</span> <span class="word key"title="COPY value /part range /deep">copy</span> <span class="word">nm</span> <span class="word">name</span> (<span class="word key"title="APPEND series value /only">append</span> <span class="word">names</span> <span class="word">nm</span>)<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="TO type spec">to</span> <span class="word">end</span><br /><span class="tab">&nbsp;</span>]] [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">names:</span> <span class="word key"title="INTERSECT ser1 ser2 /case /skip size">intersect</span> <span class="word">names</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"screen"</span> <span class="string">"tty"</span> <span class="string">"tv"</span> <span class="string">"projection"</span> <span class="string">"handheld"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"print"</span> <span class="string">"braille"</span> <span class="string">"aural"</span> <span class="string">"all"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="EMPTY? series">empty?</span> <span class="word">names</span> [<span class="word key"title="RETURN value">return</span> <span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="set-word">value:</span> <span class="word key"title="COPY value /part range /deep">copy</span> <span class="word key"title="FIRST series">first</span> <span class="word">names</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="FOREACH 'word data body">foreach</span> <span class="word">name</span> <span class="word key"title="NEXT series">next</span> <span class="word">names</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="REPEND series value /only">repend</span> <span class="word">value</span> [<span class="string">", "</span> <span class="word">name</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">value</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">list-style:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> [<span class="string">"disc"</span> <span class="string">"circle"</span> <span class="string">"square"</span>] <span class="word">value</span> [<span class="word key"title="RETURN value">return</span> <span class="word">value</span>]<br /><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span>/<span class="word key"title="CASE block /all">case</span></span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"1"</span> <span class="string">"decimal"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"a"</span> <span class="string">"lower-alpha"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"A"</span> <span class="string">"upper-alpha"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"i"</span> <span class="string">"lower-roman"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"I"</span> <span class="string">"upper-roman"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span>] <span class="word">value</span><br />]<br /><span class="set-word">number:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">some</span> <span class="word">digit</span>] [<span class="word">value</span>]<br />]<br /><span class="set-word">pixels:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">some</span> <span class="word">digit</span>] [<span class="word key"title="APPEND series value /only">append</span> <span class="word">value</span> <span class="string">"px"</span>]<br />]<br /><span class="set-word">bool:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="path"><span class="word">opts</span>/<span class="integer">1</span></span><br />]<br /><span class="set-word">length:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">some</span> <span class="word">digit</span> <span class="word">opt</span> <span class="string">"%"</span>] [<span class="word">value</span>]<br />]<br /><span class="set-word">lengthpx:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">some</span> <span class="word">digit</span> [<span class="string">"%"</span> <span class="word">|</span> (<span class="word key"title="APPEND series value /only">append</span> <span class="word">value</span> <span class="string">"px"</span>) <span class="word key"title="TO type spec">to</span> <span class="word">end</span>]] [<span class="word">value</span>]<br />]<br /><span class="set-word">multi-length:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="path"><span class="word key"title="PARSE input rules /all /case">parse</span>/<span class="word key"title="ALL block">all</span></span> <span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span> [<span class="word">some</span> <span class="word">digit</span> [<span class="string">"%"</span> <span class="word">|</span> <span class="string">"*"</span> <span class="word">|</span> <span class="word">none</span>]] [<span class="word">value</span>]<br />]<br /><span class="set-word">font-size:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="path"><span class="word key"title="TRIM series /head /tail /auto /lines /all /with str">trim</span>/<span class="word">lines</span></span> <span class="word">value</span><br /><span class="tab">&nbsp;</span><span class="word key"title="ANY block">any</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="word key"title="FIND series value /part range /only /case /any /with wild /skip size /match /tail /last /reverse">find</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"1"</span> <span class="string">"2"</span> <span class="string">"3"</span> <span class="string">"4"</span> <span class="string">"5"</span> <span class="string">"6"</span> <span class="string">"7"</span> <span class="string">"+1"</span> <span class="string">"+2"</span> <span class="string">"+3"</span> <span class="string">"+4"</span> <span class="string">"+5"</span> <span class="string">"+6"</span> <span class="string">"+7"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"-1"</span> <span class="string">"-2"</span> <span class="string">"-3"</span> <span class="string">"-4"</span> <span class="string">"-5"</span> <span class="string">"-6"</span> <span class="string">"-7"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>] <span class="word">value</span> [<span class="word">value</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word">length</span> <span class="word">value</span> <span class="word">none</span><br /><span class="tab">&nbsp;</span>]<br />]<br /><span class="set-word">imgmargin:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="IF condition then-block /else else-block">if</span> <span class="set-word">value:</span> <span class="word">number</span> <span class="word">value</span> <span class="word">none</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="word key"title="REPEND series value /only">repend</span> <span class="word">style</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"margin-"</span> <span class="path"><span class="word">opts</span>/<span class="integer">1</span></span> <span class="string">": "</span> <span class="word">value</span> <span class="string">"px;"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"margin-"</span> <span class="path"><span class="word">opts</span>/<span class="integer">2</span></span> <span class="string">": "</span> <span class="word">value</span> <span class="string">"px;"</span><br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span>]<br /><span class="tab">&nbsp;</span><span class="word">none</span><br />]<br /><span class="set-word">imgalign:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="APPEND series value /only">append</span> <span class="word">style</span> <span class="word key"title="ANY block">any</span> [<span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"bottom"</span> <span class="string">"vertical-align: bottom;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"middle"</span> <span class="string">"vertical-align: middle;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"top"</span> <span class="string">"vertical-align: top;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"left"</span> <span class="string">"float: left;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"right"</span> <span class="string">"float: right;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span>] <span class="word">value</span> <span class="string">""</span>]<br /><span class="tab">&nbsp;</span><span class="word">none</span><br />]<br /><span class="set-word">brclear:</span> <span class="word key"title="FUNC spec body">func</span> [<span class="word">value</span> <span class="word">opts</span>] [<br /><span class="tab">&nbsp;</span><span class="word key"title="APPEND series value /only">append</span> <span class="word">style</span> <span class="word key"title="ANY block">any</span> [<span class="word key"title="SELECT series value /part range /only /case /any /with wild /skip size">select</span> [<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"none"</span> <span class="string">"clear: none;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"left"</span> <span class="string">"clear: left;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"right"</span> <span class="string">"clear: right;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span><span class="tab">&nbsp;</span><span class="string">"all"</span> <span class="string">"clear: both;"</span> #[<span class="word">none</span>]<br /><span class="tab">&nbsp;</span>] <span class="word">value</span> <span class="string">""</span>]<br /><span class="tab">&nbsp;</span><span class="word">none</span><br />]</p></div></div>
    <div id="footer"><p><a href="http://www.rebol.com/">MakeDoc3 by REBOL</a> - 2-Sep-2018</p></div>
</body>
</html>
